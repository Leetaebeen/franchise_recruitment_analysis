// backend/prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// 1. íšŒì› ì •ë³´ í…Œì´ë¸” (ìˆ˜ì •ë¨: ì•„ì´ë””/ë¹„ë²ˆ ë°©ì‹)
model User {
  id        Int      @id @default(autoincrement())
  username  String?  @unique // ğŸ‘ˆ [ìˆ˜ì •] ê¸°ë³¸ ë¡œê·¸ì¸ ìœ ì €ë§Œ ì‚¬ìš© (Optionalë¡œ ë³€ê²½)
  googleId  String?  @unique // ğŸ‘ˆ [ì¶”ê°€] êµ¬ê¸€ ë¡œê·¸ì¸ ìœ ì € ID
  password  String?  // ğŸ‘ˆ [ìˆ˜ì •] êµ¬ê¸€ ìœ ì €ëŠ” ë¹„ë²ˆ ë¶ˆí•„ìš” (Optionalë¡œ ë³€ê²½)
  email     String?  @unique // ğŸ‘ˆ [ì¶”ê°€] êµ¬ê¸€ ìœ ì € ì´ë©”ì¼
  role      String   @default("USER") 
  createdAt DateTime @default(now())
}

// 2. ê°€ë§¹ì  ìƒê¶Œ ë¶„ì„ ë°ì´í„° (ê¸°ì¡´ ìœ ì§€)
model AnalysisData {
  id               Int     @id @default(autoincrement())
  uid              Int     
  regionCity       String  
  ageGroup         String  
  age              Int     
  visitDays        Int     
  totalDurationMin Int     
  avgDurationMin   Int     
  totalPaymentMay  Int     
  retainedJune     Int     
  retainedJuly     Int     
  retainedAugust   Int     
  retained90       Int     

  @@index([regionCity])
}

// 3. ìƒë‹´ ì‹ ì²­ ë‚´ì—­ (ê¸°ì¡´ ìœ ì§€)
model Consultation {
  id        Int      @id @default(autoincrement())
  name      String
  phone     String
  area      String
  budget    String
  inquiry   String?  @db.Text
  status    String   @default("PENDING") 
  createdAt DateTime @default(now())
}